# 가설 검정

-   가설 : 그럴걸

-   검정 : 테스트

-   가설 검정 : 그럴거 같은거를 테스트해 보는 것

-   예측력이라고 이것을 점수로 파악하면 된다.

## \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\--

## 카이제곱 검정

-   두 범주형 변수가 서로 상관이 있는지 판단하는 통계적 검정 방법

    -   예 ) 학력, 성별 이 직업의 만족도에 상관이 있는가?

### child별 장난감 보유 현황

-   귀무가설 : 의미가 없다(하나 마나다) 라고 가설을 세우는 것을 말한다.

    -   child1 과 child2의 장난감 보유수에 대한 만족도는 차이가 없다.

-   대립가설 : 귀무가설에 대립이 되는 가설을 의미한다.

    -   child1과 child2의 장난감 보유수에 대한 만족도는 차이가 있다.

```{r}
child1 <- c(5,11,1)
child2 <- c(4,7,3)
```

```{r}
toy <- cbind(child1,child2)
toy
```

```{r}
rownames(toy) <- c("car","truck","doll")
toy
```

```{r}
# 요걸 이해 하는 것이 중요하다. 
chisq.test(toy)
```

### 카이제곱 검정 분석하는 법

-   p-value \> 0,05 (95% 신뢰구간) 귀무가설 채택

<!-- -->

    -   즉 , child1과 child2의 데이터는 보유수에 대한 만족도에 차이가 없다. (통계적으로 큰 차이가 없다.)

    > p-value 는 0에 가까울수록 좋다. 미리 정해전 유의수준( 일반적으로 0.05 ) 보다 작으면 대립가설을 채택하고 , 유의수준보다 크면 귀무가설을 채택한다.

-   Message : 카이제곱의 근사값이 정확하지 않을 수도 있다.

    -   데이터량이 적은 경우 발생한다.

-   표본수가 적거나 데이터의 분포가 치우친 경우 피셔검정을 실행한다.

## \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\--

## 피셔검정

신뢰범위 잘라내는 방법

-   two-sided : 양쪽에서 똑같은 범위를 잘라낸다.

-   one-sided : 한쪽에서 모든 범위를 잘라낸다.

```{r}
fisher.test(toy)
```

## \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\--

## 상관계수

```{r}
cor(child1, child2)
```

## \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\--

## t-검정

### [1] 예제 : 우리 회사 건전지의 수명은 100시간이라고 말을 했다.

-   귀무가설 : 건전지의 수명은 1000시간 이다.

-   대립가설 : 건저지의 수명은 1000시간이 아니다.

검증하는 방법

1.  데이터의 분포가 정규 분포인지 -\> Shapiro-Wilk 검정
    -   귀무가설 : 데이터가 정규분포를 따른다.

    -   대립가설 : 데이터가 정규분포를 따르지 않는다.

```{r}
bat <- c(980,1008,968,1032,1012,1002,996,1017)
shapiro.test(bat)

# shapiro.test 의 결과 0.9469 > 0.05 이므로 귀무가설을 채택한다.
```

2.  정규분포인 것이 확인 되면 t-검정을 실시한다.
    -   alternative 에 들어가는 값의 의미

        -   two.sided : 데이터와 mu와 달라야 되냐?

        -   greater : 데이터가 mu보다 커야 되냐?

        -   less : 데이터가 mu보다 적어야 되냐?

```{r}
# 비교하는 데이터의 평균(검증해야 될 데이터)이 mu 이다.
t.test(bat, mu = 1000, alternative = "two.sided")

# p-value 0.8032 > 0.05 이므로 귀무가설을 채택한다. 
```

t- 검정은 언제 사용하는가?

-   과거의 데이터가 없고, 평균을 알고 있을 때 현재의 데이터와 비교를 할 때 t-검정을 사용한다.

    -   과장광고 판단할 떄 많이 사용한다.

### [2] 어떤 학급의 수학 점수 평균 : 55점인데 0교시 수업을 한 후에 학생들의 성적이 올랐을까?

-   귀무가설 : 성적은 오르지 않았다.

-   대립가설 : 성적이 올랐다.

```{r}
exam <- read.csv("./Data/exam.csv")
head(exam)
```

```{r}
a <- exam$score

shapiro.test(a)

#0.1058 > 0.05 이므로 귀무가설이고 정규분포이다. 
```

```{r}
summary(a)
```

```{r}
# 이상치 발견해 봐야 됨
boxplot(a)
```

```{r}
t.test(a, mu =55 ,alternative = "greater")

# 0.4046 > 0.05 이므로 귀무가설을 채택해야 되고, 성적은 오르지 않았다.
```

-   평균은 이상치를 다루지 않기 때문에 통계와는 무언가 느낌이 다르다.

## \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\--

## 상관관계

```{r}
y <- c(2,1,4,3)
z <- c(0,5,7,9)

cor(y,z)
```

```{r}
# 보통 많이 쓰는 거
cor(y , z , method = "pearson")

# 데이터가 적을 경우 
cor(y , z , method = "spearman")
```

## \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\--

## 콜모고로프-스미노프 검정 (KS Test)

: 주어진 2개의 데이터가 같은 분포인지를 검정하는 방법

-   귀무가설과 대립가설이 정해져 있다.

    -   귀무가설 : 두 개의 데이터 분포가 다르다.

    -   대립가설 : 두 개의 데이터 분포가 같다.

```{r}
x <- rnorm(50)
y <- runif(50)
ks.test(x,y)
```

## \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\--

## 부호검정

: 2개의 데이터 사이에 차이가 있는지 검정하는 것

-   귀무가설과 대립가설이 정해져 있다.

    -   귀무가설 : 유의한 차이가 없다

    -   대립가설 : 유의한 차이가 있다.

식사전과 식사후의 음료수 맛에 대한 평가

```{r}
x <- c(4,1,1,4,3,3,2,5,3,3)
y <- c(1,1,3,2,5,1,4,4,3,1)

```

```{r}
2

# 0.2026 > 0.05 이므로 귀무가설 채택
```

## \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\--

## 비율 검정

: 2개의 데이터 사이에 비율의 차이가 있는지에 대한 것을 검정

맥주를 좋아하시나요? 라는 질문에 서울에서는 400명 중 360명 , 부산에서는 200명중 136명이 좋다고 답했다면 둘의 비율 차이가 있다고 할 수 있는가?

귀무가설 : 유의한 차이가 없다.

대립가설 : 유의한 차이가 있다.

```{r}
hite <- c(360,136)
sample <- c(400,200)
```
